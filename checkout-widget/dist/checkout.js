!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).PaymentGateway=t()}(this,(function(){"use strict";class e{constructor(e){if(!e.key)throw new Error("API key is required");this.key=e.key,this.orderId=e.orderId,this.onSuccess=e.onSuccess||function(){},this.onFailure=e.onFailure||function(){},this.onClose=e.onClose||function(){},this.modal=null,this.iframe=null}open(){const e=document.createElement("div");e.id="payment-gateway-modal",e.setAttribute("data-test-id","payment-modal"),e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="10000",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";const t=document.createElement("div");t.className="modal-content",t.style.position="relative",t.style.width="90%",t.style.maxWidth="600px",t.style.height="80vh",t.style.backgroundColor="white",t.style.borderRadius="8px",t.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",t.style.overflow="hidden";const o=document.createElement("button");o.setAttribute("data-test-id","close-modal-button"),o.className="close-button",o.innerHTML="Ã—",o.style.position="absolute",o.style.top="10px",o.style.right="10px",o.style.zIndex="10001",o.style.border="none",o.style.background="none",o.style.fontSize="28px",o.style.cursor="pointer",o.onclick=()=>this.close();const s=document.createElement("iframe");s.setAttribute("data-test-id","payment-iframe"),s.src=`http://localhost:3001/checkout?order_id=${this.orderId}&embedded=true`,s.style.width="100%",s.style.height="100%",s.style.border="none",t.appendChild(s),t.appendChild(o),e.appendChild(t),document.body.appendChild(e),this.modal=e,this.iframe=s,window.addEventListener("message",(e=>{e.origin===window.location.origin&&("payment_success"===e.data.type?(this.onSuccess(e.data.data),this.close()):"payment_failed"===e.data.type&&this.onFailure(e.data.data))}))}close(){this.modal&&(this.modal.remove(),this.modal=null),this.onClose()}}return e}));
